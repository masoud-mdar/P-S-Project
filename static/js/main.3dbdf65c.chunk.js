(this["webpackJsonpapp-one"]=this["webpackJsonpapp-one"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(7),a=n.n(c),i=n(6),r=n(2),l=n(0),o=function(){return Object(l.jsxs)("div",{className:"loading",children:[Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Just a second..."})}),Object(l.jsx)("div",{className:"loader"})]})},b=function(e){return Object(l.jsxs)("div",{className:"main-page",children:[Object(l.jsxs)("div",{className:"btn-wrapper",children:[Object(l.jsx)("button",{name:"book-list",onClick:e.data.handleClick,className:"main-btn",children:"Book List"}),Object(l.jsx)("button",{name:"panier",onClick:e.data.handleClick,className:"main-btn",children:"Cart"})]}),Object(l.jsx)("div",{className:"smile"})]})},j=function(e){var t=e.data.booksList;return Object(l.jsx)("div",{className:"list-page",children:Object(l.jsx)("ul",{className:"book-list",children:t&&t.map((function(t){return Object(l.jsxs)("li",{className:"book",children:[Object(l.jsx)("img",{className:"book-cover",src:"".concat(t.cover),alt:t.title}),Object(l.jsxs)("div",{className:"book-hover-div",children:[Object(l.jsx)("h5",{className:"book-title",children:t.title}),Object(l.jsxs)("h5",{children:[t.price," \u20ac"]}),Object(l.jsxs)("div",{className:"book-btn-wrapper",children:[Object(l.jsx)("button",{name:"add-to-panier",onClick:e.data.handleClick,id:t.isbn,children:"Add to Cart"}),Object(l.jsx)("button",{name:"more-info",onClick:e.data.handleClick,id:t.isbn,children:"More info"})]})]})]},t.isbn)}))})})},d=function(e){var t=e.data.booksList.find((function(t){return t.isbn===e.data.selectedBook}));return Object(l.jsxs)("div",{className:"more-info",children:[Object(l.jsx)("button",{name:"synopsis-close",className:"close-btn",onClick:e.data.handleClick,children:"X"}),Object(l.jsxs)("div",{className:"synopsis-wrapper",children:[Object(l.jsx)("h4",{children:t.title}),Object(l.jsxs)("h5",{children:[t.price," \u20ac"]}),Object(l.jsx)("p",{className:"synopsis-first",children:t.synopsis[0]}),e.data.isShowMore&&t.synopsis.length>1?Object(l.jsxs)("div",{children:[Object(l.jsx)("ul",{className:"synopsis-list",children:t.synopsis.map((function(e,t){return 0===t?Object(l.jsx)("li",{children:Object(l.jsx)("p",{children:"..."})},Math.random()):Object(l.jsx)("li",{children:Object(l.jsx)("p",{children:e})},Math.random())}))}),Object(l.jsx)("button",{name:"show-less",className:"synop-btn",onClick:e.data.handleClick,children:"show less..."})]}):t.synopsis.length>1?Object(l.jsx)("div",{children:Object(l.jsx)("button",{name:"show-more",className:"synop-btn",onClick:e.data.handleClick,children:"show more..."})}):Object(l.jsx)("div",{})]})]})},h=function(e){var t=e.data,n=t.panier,s=t.booksList,c=t.totalPrice,a=t.bestPrice,i=t.offers,r=t.appliedOffer;return Object(l.jsx)("div",{className:"panier",children:n.length?Object(l.jsxs)("div",{className:"full-cart",children:[Object(l.jsx)("ul",{className:"panier-list",children:n.map((function(t){var n=t.num,c=s.find((function(e){return e.isbn===t.isbn}));return Object(l.jsxs)("li",{className:"book panier-book",children:[Object(l.jsx)("img",{className:"book-cover",src:"".concat(c.cover),alt:c.title}),Object(l.jsxs)("div",{className:"book-hover-div",children:[Object(l.jsx)("h5",{className:"book-title",children:c.title}),Object(l.jsxs)("h3",{children:[c.price," \u20ac"]}),Object(l.jsx)("h3",{children:n}),Object(l.jsxs)("div",{className:"book-btn-wrapper",children:[Object(l.jsx)("button",{name:"remove-from-panier",onClick:e.data.handleClick,id:c.isbn,children:"Remove"}),Object(l.jsx)("button",{name:"more-info",onClick:e.data.handleClick,id:c.isbn,children:"More info"})]})]})]},c.isbn)}))}),Object(l.jsxs)("div",{className:"panier-price",children:[Object(l.jsxs)("h3",{children:["Total Price without reduction: ",c," \u20ac"]}),Object(l.jsxs)("div",{className:"offers-panier",children:[Object(l.jsx)("h3",{children:"The offers available for this cart:"}),Object(l.jsx)("ul",{className:"price-list",children:i.offers.map((function(e){return Object(l.jsx)("li",{children:"slice"!==e.type||"slice"===e.type&&c>=e.sliceValue?Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:["Type of offer: ",e.type]}),Object(l.jsxs)("p",{children:["Value of offer: ",e.value," ","percentage"===e.type?"%":"\u20ac"]})]}):Object(l.jsx)("div",{})},Math.random()*Math.random())}))})]}),Object(l.jsxs)("h3",{children:["Applied offer: ",r]}),Object(l.jsxs)("h3",{children:["Total Price after applying the best reduction: ",a," \u20ac"]}),Object(l.jsx)("a",{href:"https://personal-library-masoud.netlify.app",target:"_blank",rel:"noreferrer",children:"Try out our Personal Library application"})]})]}):Object(l.jsxs)("div",{className:"empty-cart",children:[Object(l.jsx)("h2",{children:"Nothing here yet !"}),Object(l.jsx)("button",{name:"book-list",onClick:e.data.handleClick,className:"main-btn",children:"Book List"})]})})},u=function(e){var t=e.data,n=t.isMainPage,s=t.isListPage,c=t.isPanier,a=t.panier,i={color:"brown"},r=0;return a.length&&a.forEach((function(e){r+=e.num})),Object(l.jsxs)("div",{className:"nav-bar",children:[Object(l.jsx)("div",{className:"left-nav",children:Object(l.jsx)("h2",{className:"nav-title",children:"Henri Potier"})}),Object(l.jsx)("div",{className:"right-nav",children:Object(l.jsxs)("div",{className:"nav-btn-wrapper",children:[Object(l.jsx)("button",{name:"nav-home-btn",onClick:e.data.handleClick,style:n?i:{},className:"nav-btn",children:"Home"}),Object(l.jsx)("button",{name:"book-list",onClick:e.data.handleClick,style:s?i:{},className:"nav-btn",children:"List"}),Object(l.jsx)("button",{name:"panier",onClick:e.data.handleClick,style:c?i:{},className:"nav-btn",children:"Cart"}),Object(l.jsx)("div",{className:"nav-panier-counter",children:r||""})]})})]})},O=function(e){var t=e.data.booksList.find((function(t){return t.isbn===e.data.selectedBook}));return Object(l.jsx)("div",{className:"pop-up",children:Object(l.jsxs)("h4",{children:[t.title," successfully added to the Cart !"]})})},f=function(){return Object(l.jsxs)("div",{className:"footer",children:[Object(l.jsx)("div",{className:"left-part",children:Object(l.jsx)("h3",{children:"Masoud Mohammadi Darvishvand"})}),Object(l.jsxs)("div",{className:"right-part",children:[Object(l.jsx)("a",{href:"https://github.com/masoud-mdar",target:"_blank",rel:"noreferrer",children:"GitHub"}),Object(l.jsx)("a",{href:"https://masoud-mdar.github.io/portfolio",target:"_blank",rel:"noreferrer",children:"Portfolio"})]})]})},m=function(e,t,n,s,c){var a=e.find((function(e){return e.isbn===t}));return c?(s((function(e){return e+a.price})),n+a.price):(s((function(e){return e-a.price})),n-a.price)},p=function(e,t,n,s,c,a,i,r){e(!0),fetch(r).then((function(e){return e.json()})).then((function(r){e(!1),t(!0),n(!1),s(!1),!i&&c(""),a(r)}))},x=function(e,t,n,s,c,a,i,r,l,o,b,j,d,h,u){e(!0),fetch("".concat(b,"/").concat(j,"/commercialOffers")).then((function(e){return e.json()})).then((function(b){var j=d,O=0;b.offers.forEach((function(o){if("percentage"===o.type){var h=d*(o.value/100);(O=d-h)<j&&(j=O,t(o.type))}else if("minus"===o.type)(O=d-o.value)<j&&(j=O,t(o.type));else if("slice"===o.type&&d>=o.sliceValue){var u=Math.floor(d/o.sliceValue);u*=o.value,(O=d-u)<j&&(j=O,t(o.type))}n(j),s(b),e(!1),c(!1),a(!0),i(!1),r(!1),l(!1)})),c(!0),a(!1),u&&!h&&o("")}))},v="https://henri-potier.techx.fr/books",k=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(!0),k=Object(r.a)(a,2),N=k[0],C=k[1],y=Object(s.useState)(!1),g=Object(r.a)(y,2),w=g[0],S=g[1],P=Object(s.useState)(!1),L=Object(r.a)(P,2),M=L[0],B=L[1],T=Object(s.useState)([]),E=Object(r.a)(T,2),V=E[0],H=E[1],I=Object(s.useState)(!1),J=Object(r.a)(I,2),_=J[0],A=J[1],D=Object(s.useState)(""),G=Object(r.a)(D,2),R=G[0],X=G[1],q=Object(s.useState)(!1),z=Object(r.a)(q,2),F=z[0],K=z[1],Q=Object(s.useState)([]),U=Object(r.a)(Q,2),W=U[0],Y=U[1],Z=Object(s.useState)(!1),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(s.useState)({}),se=Object(r.a)(ne,2),ce=se[0],ae=se[1],ie=Object(s.useState)(0),re=Object(r.a)(ie,2),le=re[0],oe=re[1],be=Object(s.useState)(0),je=Object(r.a)(be,2),de=je[0],he=je[1],ue=Object(s.useState)(""),Oe=Object(r.a)(ue,2),fe=Oe[0],me=Oe[1],pe=function(e){var t=e.target,n=t.name,s=t.id;switch(n){case"book-list":V.length?(S(!0),C(!1),B(!1),!ee&&X("")):p(c,S,C,B,X,H,ee,v);break;case"panier":if(!M&&W.length){var a="";W.forEach((function(e){for(var t=0;t<e.num;t++)a+=""===a?e.isbn:",".concat(e.isbn)})),x(c,me,he,ae,B,C,S,A,K,X,v,a,le,ee,!0)}else W.length||(B(!0),C(!1),S(!1),A(!1),K(!1),!ee&&X(""));break;case"more-info":A(!0),X(s);break;case"show-more":K(!0);break;case"show-less":K(!1);break;case"synopsis-close":A(!1),K(!1),!ee&&X("");break;case"add-to-panier":if(!ee){if(W.length){var r=W.findIndex((function(e){return e.isbn===s}));if(r<0)Y((function(e){return e.push({isbn:s,num:1}),e}));else{var l=Object(i.a)(W),o=l[r];o.num=o.num+1,l.splice(r,1,o),Y(l)}}else Y((function(e){return e.push({isbn:s,num:1}),e}));m(V,s,le,oe,!0)}K(!1),A(!1),X(s),te(!0),setTimeout((function(){te(!1)}),1e3);break;case"nav-home-btn":C(!0),A(!1),K(!1),B(!1),S(!1),!ee&&X("");break;case"remove-from-panier":var b=W.findIndex((function(e){return e.isbn===s})),j=Object(i.a)(W),d=j[b];if(d.num>1?(d.num=d.num-1,j.splice(b,1,d)):j.splice(b,1),Y(j),j.length){var h=m(V,s,le,oe,!1),u="";j.forEach((function(e){for(var t=0;t<e.num;t++)u+=""===u?e.isbn:",".concat(e.isbn)})),x(c,me,he,ae,B,C,S,A,K,X,v,u,h,ee,!1)}else oe(0);break;default:console.log(n)}};return Object(l.jsx)("div",{children:n?Object(l.jsx)(o,{}):Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(u,{data:{handleClick:pe,panier:W,isMainPage:N,isListPage:w,isPanier:M}}),N?Object(l.jsx)(b,{data:{handleClick:pe}}):w?Object(l.jsx)(j,{data:{handleClick:pe,booksList:V}}):M?Object(l.jsx)(h,{data:{handleClick:pe,panier:W,booksList:V,totalPrice:le,bestPrice:de,offers:ce,appliedOffer:fe}}):Object(l.jsx)("div",{}),_&&Object(l.jsx)(d,{data:{handleClick:pe,selectedBook:R,booksList:V,isShowMore:F}}),ee&&Object(l.jsx)(O,{data:{selectedBook:R,booksList:V}}),Object(l.jsx)(f,{})]})})};n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21);a.a.render(Object(l.jsx)(k,{}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.3dbdf65c.chunk.js.map